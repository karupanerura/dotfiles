#!/bin/sh
set -e

IN_TREE=`git rev-parse --is-inside-work-tree`;
if [ "$IN_TREE" = "true" ]; then
    LOGFILE=`git rev-parse --show-cdup`.git/info/.branch.log
    if [ -f $LOGFILE ]; then
        git checkout `tail -n2 $LOGFILE | head -n1`
        head -n -2 $LOGFILE > ${LOGFILE}.tmp
        mv ${LOGFILE}.tmp $LOGFILE
    fi
fi
